
<!doctype html>
<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174267360-2"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-174267360-2');
  </script>
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="../images/favicon-7d95b84d.ico" rel="icon" type="image/ico" />
  <title>Web SDK Documentation</title>

  <style media="screen">
    .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
  </style>
  <style media="print">
    * {
      -webkit-transition: none !important;
      transition: none !important;
    }

    .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
  </style>
  <link href="../stylesheets/screen-171acb3b.css" rel="stylesheet" media="screen" />
  <link href="../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
    <script src="../javascripts/all-e9bde216.js"></script>

    <script>
        $(function () {
            setupCodeCopy();
        });
    </script>
</head>

<body class="javascript javascript_index" data-languages="[&quot;javascript&quot;]">
<a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
</a>
<div class="toc-wrapper">
  <a href="/"><img src="../images/logo-512e0f88.png" class="logo" alt="" /></a>
    <div class="lang-selector">
          <a href="#" data-language-name="javascript">javascript</a>
    </div>
    <div class="search">
      <input type="text" class="search" id="input-search" placeholder="Search">
    </div>
    <ul class="search-results"></ul>
  <ul id="toc" class="toc-list-h1">
      <li>
        <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
      </li>
      <li>
        <a href="#installation" class="toc-h1 toc-link" data-title="Installation">Installation</a>
      </li>
      <li>
        <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          <ul class="toc-list-h2">
              <li>
                <a href="#authentication-begin-a-user-session" class="toc-h2 toc-link" data-title="Begin a user session">Begin a user session</a>
              </li>
          </ul>
      </li>
      <li>
        <a href="#current-user" class="toc-h1 toc-link" data-title="Current User">Current User</a>
          <ul class="toc-list-h2">
              <li>
                <a href="#current-user-listen-to-current-user-events" class="toc-h2 toc-link" data-title="Listen to current user events">Listen to current user events</a>
              </li>
          </ul>
      </li>
      <li>
        <a href="#push-notifications" class="toc-h1 toc-link" data-title="Push Notifications">Push Notifications</a>
          <ul class="toc-list-h2">
              <li>
                <a href="#push-notifications-push-notification-types" class="toc-h2 toc-link" data-title="Push notification types">Push notification types</a>
              </li>
              <li>
                <a href="#push-notifications-get-registered-devices" class="toc-h2 toc-link" data-title="Get registered devices">Get registered devices</a>
              </li>
              <li>
                <a href="#push-notifications-register-a-device" class="toc-h2 toc-link" data-title="Register a device">Register a device</a>
              </li>
              <li>
                <a href="#push-notifications-handling-push-notification-data" class="toc-h2 toc-link" data-title="Handling push notification data">Handling push notification data</a>
              </li>
              <li>
                <a href="#push-notifications-delete-registered-devices" class="toc-h2 toc-link" data-title="Delete registered devices">Delete registered devices</a>
              </li>
          </ul>
      </li>
      <li>
        <a href="#channels" class="toc-h1 toc-link" data-title="Channels">Channels</a>
          <ul class="toc-list-h2">
              <li>
                <a href="#channels-channel-types" class="toc-h2 toc-link" data-title="Channel types">Channel types</a>
              </li>
              <li>
                <a href="#channels-get-channels" class="toc-h2 toc-link" data-title="Get channels">Get channels</a>
              </li>
              <li>
                <a href="#channels-get-joinable-channels" class="toc-h2 toc-link" data-title="Get joinable channels">Get joinable channels</a>
              </li>
              <li>
                <a href="#channels-get-channel-members" class="toc-h2 toc-link" data-title="Get channel members">Get channel members</a>
              </li>
              <li>
                <a href="#channels-entering-a-channel" class="toc-h2 toc-link" data-title="Entering a channel">Entering a channel</a>
              </li>
              <li>
                <a href="#channels-listen-to-channel-events" class="toc-h2 toc-link" data-title="Listen to channel events">Listen to channel events</a>
              </li>
              <li>
                <a href="#channels-creating-typing-indicators" class="toc-h2 toc-link" data-title="Creating typing indicators">Creating typing indicators</a>
              </li>
              <li>
                <a href="#channels-exiting-a-channel" class="toc-h2 toc-link" data-title="Exiting a channel">Exiting a channel</a>
              </li>
          </ul>
      </li>
      <li>
        <a href="#messages" class="toc-h1 toc-link" data-title="Messages">Messages</a>
          <ul class="toc-list-h2">
              <li>
                <a href="#messages-messages-types" class="toc-h2 toc-link" data-title="Messages types">Messages types</a>
              </li>
              <li>
                <a href="#messages-get-messages" class="toc-h2 toc-link" data-title="Get messages">Get messages</a>
              </li>
              <li>
                <a href="#messages-send-a-message" class="toc-h2 toc-link" data-title="Send a message">Send a message</a>
              </li>
              <li>
                <a href="#messages-message-delivery-receipts" class="toc-h2 toc-link" data-title="Message delivery receipts">Message delivery receipts</a>
              </li>
              <li>
                <a href="#messages-get-message-delivery-receipts" class="toc-h2 toc-link" data-title="Get message delivery receipts">Get message delivery receipts</a>
              </li>
              <li>
                <a href="#messages-message-read-receipts" class="toc-h2 toc-link" data-title="Message read receipts">Message read receipts</a>
              </li>
              <li>
                <a href="#messages-read-a-message" class="toc-h2 toc-link" data-title="Read a message">Read a message</a>
              </li>
              <li>
                <a href="#messages-get-message-read-receipts" class="toc-h2 toc-link" data-title="Get message read receipts">Get message read receipts</a>
              </li>
          </ul>
      </li>
  </ul>
    <ul class="toc-footer">
        <li><a href='https://www.chatkitty.com'>&copy; ChatKitty 2020. All rights reserved</a></li>
    </ul>
</div>
<div class="page-wrapper">
  <div class="dark-box"></div>
  <div class="content">
    <h1 id='introduction'>Introduction</h1>
<p>Integrate <strong>real-time chat</strong> into your Web application with the ChatKitty SDK for Web.  </p>
<h1 id='installation'>Installation</h1>
<p>ChatKitty is available as an <a href="https://www.npmjs.com/package/chatkitty-sdk-web">npm package</a>.</p>

<blockquote>
<p>Install the ChatKitty npm package with npm...</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>npm <span class="nb">install </span>chatkitty-sdk-web
</code></pre></div>
<blockquote>
<p>...or with yarn</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>yarn add chatkitty-sdk-web
</code></pre></div><h1 id='authentication'>Authentication</h1>
<p><strong>Initialize the Chat SDK with your App ID</strong>  </p>

<blockquote>
<p>Get a ChatKitty instance with your application App ID</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">kitty</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ChatKitty</span><span class="p">({</span>
                  <span class="na">appID</span><span class="p">:</span> <span class="nx">CHATKITTY_APP_ID</span><span class="p">,</span>
                <span class="p">});</span>
</code></pre></div>
<p>Create a <code>ChatKitty</code> instance by passing your application&#39;s App ID to the <code>new ChatKitty(ChatKittyConfiguration)</code> method as a parameter.</p>
<h2 id='authentication-begin-a-user-session'>Begin a user session</h2>
<p>To make calls to ChatKitty through the Chat SDK, a user session must be initiated.</p>

<p>You can initiate a user session using the unique <strong>username</strong> of a user and a <strong>challenge token</strong>, or 
using a just username if the user is a guest.</p>

<aside class="notice">
 A username must be unique within a ChatKitty application.<br/>
 We recommend you use as a hashed email address or phone number as your ChatKitty usernames.
</aside>
<h3 id='authentication-begin-a-user-session-begin-a-user-session-with-a-user-name-and-challenge-token'>Begin a user session with a user name and challenge token</h3>
<blockquote>
<p>Starting a user session</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">startSession</span><span class="p">({</span>
          <span class="na">username</span><span class="p">:</span> <span class="nx">CHATKITTY_USERNAME</span><span class="p">,</span>
          <span class="na">challengeToken</span><span class="p">:</span> <span class="nx">CHATKITTY_CHALLENGE_TOKEN</span><span class="p">,</span>
          <span class="na">callback</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">;</span>

                <span class="c1">// Handle user</span>
              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Handle request cancellation</span>
              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Handle error</span>
              <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
</code></pre></div>
<p>Create a challenge token for a user server-side using the <strong>Platform API</strong>. You can then begin a user session by calling the 
<code>ChatKitty.startSession(StartSessionParams)</code> method with your user&#39;s unique name and challenge token.</p>

<aside class="notice">
 You should store user challenge tokens securely to your persistent storage. <br>
 When a user logs into your client application, load the user's username and challenge token from storage 
 and use them to start a user session. 
</aside>
<h3 id='authentication-begin-a-user-session-begin-a-user-session-with-a-user-name-guest-user-session'>Begin a user session with a user name (guest user session)</h3>
<blockquote>
<p>Starting a guest user session</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">startSession</span><span class="p">({</span>
          <span class="na">username</span><span class="p">:</span> <span class="nx">CHATKITTY_USERNAME</span><span class="p">,</span>
          <span class="na">callback</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">;</span>

                <span class="c1">// Handle user</span>
              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Handle request cancellation</span>
              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Handle error</span>
              <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
</code></pre></div>
<p>If your application has the <strong>guest user</strong> feature enabled, you can begin a user session by calling the 
<code>ChatKitty.startSession(StartSessionParams)</code> method with your user&#39;s unique name.</p>

<aside class="notice">
 Guest users are appropriate when your application in development, if your application supports anonymous chat, or if you don't have back-end authentication.
</aside>
<h1 id='current-user'>Current User</h1>
<blockquote>
<p>Get the current user</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">;</span>

    <span class="c1">// Handle user</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>After starting a ChatKitty <a href="#authentication-begin-a-user-session">user session</a>, you can request the current user 
anytime by calling the <code>ChatKitty.getCurrentUser(function)</code> method.</p>
<h2 id='current-user-listen-to-current-user-events'>Listen to current user events</h2>
<p>When an event involving the current user happens, like joining or exiting a channel, 
a <code>CurrentUserEvent</code> is sent to registered channel event listeners.</p>
<h3 id='current-user-listen-to-current-user-events-registering-a-current-user-event-listener'>Registering a current user event listener</h3>
<blockquote>
<p>Register a current user event listener</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">registration</span> <span class="o">=</span> <span class="nx">kitty</span><span class="p">.</span><span class="nx">registerCurrentUserEventListener</span><span class="p">(</span><span class="nx">TYPE</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">case</span> <span class="dl">"</span><span class="s2">CURRENT_USER.CHANNEL.JOINED</span><span class="dl">"</span><span class="p">:</span>
             <span class="kd">let</span> <span class="nx">channelJoined</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">channel</span><span class="p">;</span>
              <span class="c1">// Handle channel joined</span>
             <span class="k">break</span>
          <span class="k">case</span> <span class="dl">"</span><span class="s2">CURRENT_USER.CHANNEL.LEFT</span><span class="dl">"</span><span class="p">:</span>
             <span class="kd">let</span> <span class="nx">channelLeft</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">channel</span><span class="p">;</span>
             <span class="c1">// Handle channel joined</span>
             <span class="k">break</span>
          <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
      <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>To beginning listening to current user events, register a current user event listener by calling the <code>ChatKitty.registerCurrentUserEventListener(String, function)</code> method.
Where <code>String</code> is the <strong>type</strong> of event the function handles.<br>
This method returns a <code>CurrentUserEventListenerRegistration</code> object.</p>
<h4 id='current-user-listen-to-current-user-events-registering-a-current-user-event-listener-current-user-event-types'>Current user event types</h4>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>CURRENT_USER.CHANNEL.CHANGED_STATUS</code></td>
<td>Fired when the current user joins or leaves a channel.</td>
</tr>
</tbody></table>
<h1 id='push-notifications'>Push Notifications</h1>
<p>ChatKitty Web SDK offers functionality for sending notification messages to your mobile users. 
Currently, the ChatKitty SDK supports registering push notification devices with <a href="https://reactnative.dev/">React Native</a>.</p>
<h2 id='push-notifications-push-notification-types'>Push notification types</h2>
<p>There are two push notification services that are supported by ChatKitty. </p>
<h3 id='push-notifications-push-notification-types-firebase-cloud-messaging'>Firebase Cloud Messaging</h3>
<p>This refers to the Push Notification service for Android devices. 
Documentation for setting up FCM can be founding in our <a href="../platform/#push-notification-credentials-fcm">FCM Setup Gudie</a> </p>
<h3 id='push-notifications-push-notification-types-apple-push-notification-service'>Apple Push Notification Service</h3>
<p>This refers to the Push Notification service for iOS devices. 
Documentation for setting up APNs can be founding in our <a href="../platform/#push-notification-credentials-apns">APNs Setup Gudie</a> </p>
<h2 id='push-notifications-get-registered-devices'>Get registered devices</h2>
<blockquote>
<p>Get registered devices for the current user</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getRegisteredDevices</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">devices</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">devices</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">device</span> <span class="k">of</span> <span class="nx">devices</span><span class="p">)</span> <span class="p">{</span>
       <span class="c1">// Handle device</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can get registered devices for the current user by calling the <code>ChatKitty.getRegisteredDevices(function)</code> method.</p>
<h2 id='push-notifications-register-a-device'>Register a device</h2>
<blockquote>
<p>Register a device </p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">registerPushNotificationDevice</span><span class="p">(</span><span class="nx">TYPE</span><span class="p">,</span> <span class="nx">TOKEN</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Successfully registered a device</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can register a device by calling the <code>ChatKitty.registerPushNotificationDevice(string, string, function)</code> method.</p>
<h4 id='push-notifications-register-a-device-apple-push-notification-service-push-notification-device-types'>Push notification device types</h4>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>FCM</code></td>
<td>Indicates the Firebase Cloud Messaging Service</td>
</tr>
<tr>
<td><code>APNS</code></td>
<td>Indicates the Apple Push Notification Service</td>
</tr>
</tbody></table>
<h2 id='push-notifications-handling-push-notification-data'>Handling push notification data</h2>
<blockquote>
<p>Handling push notification data</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">handlePushNotificationData</span><span class="p">(</span><span class="nx">notification</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Check the type of push notification</span>
     <span class="kd">const</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">type</span>
     <span class="c1">// Extract the recipient from the push notification</span>
     <span class="kd">const</span> <span class="nx">recipient</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">recipient</span>
     <span class="c1">// Extract the message from the push notification (if applicable)</span>
     <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">message</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can retrieve data from a push notification by calling the <code>ChatKitty.handlePushNotificationData(PushNotificationData, function)</code> method.</p>
<h4 id='push-notifications-handling-push-notification-data-apple-push-notification-service-push-notification-types'>Push notification types</h4>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>SYSTEM:SENT:MESSAGE</code></td>
<td>Received when an application administrator sends a system message through the platform API. This includes a <code>message</code> payload, which is the message resource of the <strong>system message</strong> sent.</td>
</tr>
<tr>
<td><code>USER:SENT:MESSAGE</code></td>
<td>Received when a chat user sends a message client-side. This includes a <code>message</code> payload, which is the message resource of the <strong>user message</strong> sent.</td>
</tr>
</tbody></table>
<h2 id='push-notifications-delete-registered-devices'>Delete registered devices</h2>
<blockquote>
<p>Deleting a registered device </p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">removeDevice</span><span class="p">(</span><span class="nx">device</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Successfully removed a device</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can remove a push notification device by calling the <code>ChatKitty.removeDevice(Device, function)</code> method. 
This will stop sending notifications to the device.</p>
<h1 id='channels'>Channels</h1>
<p>Channels are the backbone of the ChatKitty chat experience. Users can join channels and receive 
or send messages. ChatKitty broadcasts messages created in channels to <strong>channel members</strong> with active 
<strong>chat sessions</strong> and sends <strong>push notifications</strong> to offline members.</p>
<h2 id='channels-channel-types'>Channel types</h2>
<p>There are four types of channels;</p>
<h3 id='channels-channel-types-open-channel'>Open Channel</h3>
<p>Open channels provide Twitch-style chats where many users can join the chat without invites and send 
messages. </p>

<aside class="notice">
Messages sent in open channels are <b>ephemeral</b> and not persisted by ChatKitty.
</aside>
<h3 id='channels-channel-types-public-channel'>Public Channel</h3>
<p>Users can join public channels by themselves (like an open chat) or via invites from an existing channel member.
ChatKitty persists messages sent in public channels by default but this behaviour can be configured.</p>
<h3 id='channels-channel-types-private-channel'>Private Channel</h3>
<p>Users can only join private channels via invites from an existing channel member.
ChatKitty persists messages sent in private channels by default but this behaviour can be configured.</p>
<h3 id='channels-channel-types-direct-channel'>Direct Channel</h3>
<p>Direct channels let users have private conversations between <strong>up to 9</strong> other users.
New users cannot be added to a direct channel and there can only exist one direct channel between a set of users.</p>
<h2 id='channels-get-channels'>Get channels</h2>
<blockquote>
<p>Get channels accessible by the current user</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getChannels</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">channels</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">channel</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">channel</span> <span class="k">of</span> <span class="nx">channels</span><span class="p">)</span> <span class="p">{</span>
       <span class="c1">// Handle channel</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can get channels the current user has joined by calling the <code>ChatKitty.getChannels(function)</code> method.</p>
<h2 id='channels-get-joinable-channels'>Get joinable channels</h2>
<blockquote>
<p>Get channels that can be joined by the current user</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getJoinableChannels</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">channels</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">channels</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">channel</span> <span class="k">of</span> <span class="nx">channels</span><span class="p">)</span> <span class="p">{</span>
       <span class="c1">// Handle channel</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can get channels the current user can join by calling the <code>ChatKitty.getJoinableChannels(function)</code> method.</p>
<h2 id='channels-get-channel-members'>Get channel members</h2>
<blockquote>
<p>Get members of a particular channel</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getChannelMembers</span><span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">members</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">members</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">member</span> <span class="k">of</span> <span class="nx">members</span><span class="p">)</span> <span class="p">{</span>
       <span class="c1">// Handle member</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can get the members of a channel by calling the <code>ChatKitty.getChannelMembers(Channel, function)</code> method.</p>
<h2 id='channels-entering-a-channel'>Entering a channel</h2>
<blockquote>
<p>Entering a channel</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code> <span class="kd">let</span> <span class="nx">registration</span> <span class="o">=</span> <span class="nx">kitty</span><span class="p">.</span><span class="nx">enterChannel</span><span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Listen to channel events. </span>
      <span class="p">}</span>
    <span class="p">});</span>
</code></pre></div>
<p>You must first enter a channel to receive messages and other events related to the channel.</p>

<p>Enter a channel by calling the <code>ChatKitty.enterChannel(Channel, function)</code> method. This method returns a <code>ChannelEnterRegistration</code> object.</p>
<h2 id='channels-listen-to-channel-events'>Listen to channel events</h2>
<p>When an event involving a channel happens, like a message sent in the channel or a user joining the channel, 
a <code>ChannelEvent</code> is sent to registered channel event listeners.</p>
<h3 id='channels-listen-to-channel-events-registering-a-channel-event-listener'>Registering a channel event listener</h3>
<blockquote>
<p>Register a channel event listener</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">registration</span> <span class="o">=</span> <span class="nx">kitty</span><span class="p">.</span><span class="nx">registerChannelEventListener</span><span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="nx">TYPE</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">case</span> <span class="dl">"</span><span class="s2">MESSAGE.RECEIVED</span><span class="dl">"</span><span class="p">:</span>
             <span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
              <span class="c1">// Handle message</span>
             <span class="k">break</span>
          <span class="k">case</span> <span class="dl">"</span><span class="s2">PARTICIPANT.ENTERED</span><span class="dl">"</span><span class="p">:</span>
             <span class="kd">let</span> <span class="nx">enteredUser</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
              <span class="c1">// Handle user who entered.</span>
             <span class="k">break</span>
          <span class="k">case</span> <span class="dl">"</span><span class="s2">PARTICIPANT.EXITED</span><span class="dl">"</span><span class="p">:</span>
              <span class="kd">let</span> <span class="nx">exitedUser</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
              <span class="c1">// Handle user who exited.</span>
             <span class="k">break</span>
          <span class="k">case</span> <span class="dl">"</span><span class="s2">KEYSTROKES.CREATED</span><span class="dl">"</span><span class="p">:</span>
             <span class="kd">let</span> <span class="nx">keystrokeUser</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
             <span class="kd">let</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">keys</span><span class="p">;</span>
              <span class="c1">// Handle typing indicator for user and keys.</span>
            <span class="k">break</span>
          <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
      <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>To beginning listening to channel events, register a channel event listener by calling the <code>ChatKitty.registerChannelEventListener(Channel, String, function)</code> method.
Where <code>String</code> is the <strong>type</strong> of event the function handles.<br>
This method returns a <code>ChannelEventListenerRegistration</code> object.</p>
<h4 id='channels-listen-to-channel-events-registering-a-channel-event-listener-channel-event-types'>Channel event types</h4>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>MESSAGE.RECEIVED</code></td>
<td>Fired when the device receives a sent message.</td>
</tr>
<tr>
<td><code>PARTICIPANT.CHANGED_STATUS</code></td>
<td>Fired when a participant has entered or exited a channel.</td>
</tr>
</tbody></table>
<h4 id='channels-listen-to-channel-events-registering-a-channel-event-listener-group-channel-event-types'>Group Channel event types</h4>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>MESSAGE.DELIVERY_RECEIPT.CREATED</code></td>
<td>Fired when a message has been delivered in a group channel.</td>
</tr>
<tr>
<td><code>KEYSTROKES.CREATED</code></td>
<td>Fired when a participant has started typing characters.</td>
</tr>
</tbody></table>
<h3 id='channels-listen-to-channel-events-deregistering-a-channel-event-listener'>Deregistering a channel event listener</h3>
<blockquote>
<p>Deregister a channel event listener</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">registration</span><span class="p">.</span><span class="nx">deregister</span><span class="p">();</span> <span class="c1">// ChannelEventListenerRegistration</span>
</code></pre></div>
<p>If you no longer wish to receive events with a channel event listener, deregister it by 
calling the <code>ChannelEventListenerRegistration.deregister()</code> method on 
<code>ChannelEventListenerRegistration</code> object returned from registering the event listener.</p>
<h2 id='channels-creating-typing-indicators'>Creating typing indicators</h2>
<blockquote>
<p>Creating typing indicators</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">keystroke</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">keys</span><span class="p">:</span> <span class="dl">"</span><span class="s2">abc</span><span class="dl">"</span>
<span class="p">}</span>

<span class="nx">kitty</span><span class="p">.</span><span class="nx">sendChannelKeyStrokes</span><span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="nx">keystroke</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Handle successful keystroke. </span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Handle request cancellation</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Handle error</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<p>You can send keystrokes to a <a href="#channels">channel</a> by calling 
the <code>ChatKitty.sendChannelKeyStrokes(Channel, CreateReplyThreadKeystrokesRequest, function)</code> method. </p>
<h2 id='channels-exiting-a-channel'>Exiting a channel</h2>
<blockquote>
<p>Exiting a channel</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">registration</span><span class="p">.</span><span class="nx">exitChannel</span><span class="p">();</span> <span class="c1">// ChannelEnterRegistration</span>
</code></pre></div>
<p>If you no longer wish to receive events related to a channel you must exit the channel. </p>

<p>Exit a channel by calling the <code>ChannelEnterRegistration.exitChannel()</code> method.</p>
<h1 id='messages'>Messages</h1>
<p>Users send messages through your application and administrators can send messages through the Platform API. </p>
<h2 id='messages-messages-types'>Messages types</h2>
<p>There are four types of messages;</p>
<h3 id='messages-messages-types-text-message'>Text Message</h3>
<p>Users can send text messages containing a unicode text body. These messages can contain emojis and other unicode characters
 but have no file attachments.</p>
<h3 id='messages-messages-types-file-message'>File Message</h3>
<p>Users can send files messages with one, or many file attachments.</p>
<h3 id='messages-messages-types-system-text-message'>System Text Message</h3>
<p>Administrators can send text messages containing a unicode text body. These messages can contain emojis and other unicode characters
 but have no file attachments.</p>

<aside class="notice">
 System text messages can only be sent using the Platform API.
</aside>
<h3 id='messages-messages-types-system-file-message'>System File Message</h3>
<p>Administrators can send files messages with one, or many file attachments.</p>

<aside class="notice">
 System file messages can only be sent using the Platform API.
</aside>
<h2 id='messages-get-messages'>Get messages</h2>
<blockquote>
<p>Get messages inside a channel</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getChannelMessages</span><span class="p">(</span><span class="nx">channel</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">messages</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">messages</span>
    <span class="c1">// Array of messages</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle request cancellation</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>

  <span class="c1">// Pagination</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">kitty</span><span class="p">.</span><span class="nx">getNextMessages</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">nextMessages</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">messages</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>You can get messages in a <a href="#channels">channel</a> by calling the <code>ChatKitty.getChannelMessages(Channel, function)</code> method.</p>
<h2 id='messages-send-a-message'>Send a message</h2>
<blockquote>
<p>Send a message to a channel</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">sendChannelMessage</span><span class="p">(</span>
  <span class="nx">channel</span><span class="p">,</span>
  <span class="k">new</span> <span class="nx">CreateTextMessageRequest</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello world!</span><span class="dl">'</span><span class="p">),</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>

      <span class="c1">// Handle message</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isCancelled</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Handle request cancellation</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isError</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Handle error</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p>You can send a message to a <a href="#channels">channel</a> by calling the <code>ChatKitty.sendChannelMessage(Channel, CreateMessageRequest, function)</code> method.</p>
<h2 id='messages-message-delivery-receipts'>Message delivery receipts</h2>
<p>With message delivery receipts, you can see when messages get delivered on another user&#39;s devices.</p>

<p>When a user receives or fetches a message sent by another user for the first time, a delivery receipt is created.</p>

<p>Delivery receipts are automatically created by the ChatKitty platform and this SDK.</p>

<aside class="notice">
 Delivery receipts are only created for messages sent inside <b>group channels</b>.
</aside>
<h2 id='messages-get-message-delivery-receipts'>Get message delivery receipts</h2>
<blockquote>
<p>Get delivery receipts for a message</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getMessageDeliveryReceipts</span><span class="p">(</span>
  <span class="nx">message</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">receipt</span> <span class="k">of</span> <span class="nx">result</span><span class="p">.</span><span class="nx">receipts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">receipt</span><span class="p">.</span><span class="nx">user</span>
     <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p>You can get delivery receipts for a <a href="#messages">message</a> by calling the <code>ChatKitty.getMessageDeliveryReceipts(Message, function)</code> method.</p>
<h2 id='messages-message-read-receipts'>Message read receipts</h2>
<p>With message read receipts, you can see when messages are read by other users</p>

<p>When a user reads a message for the first time, a read receipt is created.</p>

<aside class="notice">
 Read receipts are only created for messages sent inside <b>group channels</b>.
</aside>
<h2 id='messages-read-a-message'>Read a message</h2>
<blockquote>
<p>Marking a message as read</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">markMessageRead</span><span class="p">(</span>
  <span class="nx">message</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Handle success</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p>You can mark a <a href="#messages">message</a> as read by calling the <code>ChatKitty.markMessageRead(Message, function)</code> method. Mark a message
as read when a message is displayed to the current user.</p>
<h2 id='messages-get-message-read-receipts'>Get message read receipts</h2>
<blockquote>
<p>Get read receipts for a message</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">kitty</span><span class="p">.</span><span class="nx">getReadReceipts</span><span class="p">(</span>
  <span class="nx">message</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">receipt</span> <span class="k">of</span> <span class="nx">result</span><span class="p">.</span><span class="nx">receipts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">receipt</span><span class="p">.</span><span class="nx">user</span>
     <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p>You can get read receipts for a message by calling the <code>ChatKitty.getMessageReadReceipts(Message, function)</code> method.</p>

  </div>
  <div class="dark-box">
      <div class="lang-selector">
            <a href="#" data-language-name="javascript">javascript</a>
      </div>
  </div>
</div>
<script src="https://www.chatkitty.com/js/plugins.js"></script>
<script src="https://www.chatkitty.com/js/init.js"></script>
<script src="https://www.chatkitty.com/js/main.js"></script>
</body>
</html>
